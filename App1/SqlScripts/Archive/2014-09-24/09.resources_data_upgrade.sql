-- set all existing proxy api as public
update resources set APIAttribute = 0 where apiattribute = 11

--set below abi as private api
update resources set APIAttribute = 1 where id in ('C4012345-AAAA-BBBB-CCCC-123456700046',
'C4012345-AAAA-BBBB-CCCC-D23456700228','c4012345-aaaa-bbbb-cccc-d23456700226','c4012345-aaaa-bbbb-cccc-d23456700227','C4012345-AAAA-BBBB-CCCC-123456700205')

-- set all api as proxy
update resources set isproxy = 1

--below apis only works based on cloud platform, doesn't use service proxy.
update resources set isproxy=0 where id in('B6385F30-4DA0-11E2-A346-005056C10003',
'B6385F30-4DA0-11E2-A346-005056C10004',
'B6385F30-4DA0-11E2-A346-005056C10005',
'B6385F30-4DA0-11E2-A346-005056C10006',
'B6385F30-4DA0-11E2-A346-005056C10032',
'B6385F30-4DA0-11E2-A346-005056C10078',
'B6385F30-4DA0-11E2-A346-005056C10079',
'B6385F30-4DA0-11E2-A346-005056C20007',
'DD592AE9-20E6-4E96-853B-88B37A1E3503',
'9430809D-23E6-47B8-8395-C14B70A2C11E',
'95FAC679-5E60-446A-9B64-CAF49EEA90B1',
'3CEE2C29-4A40-4342-ABE8-CBC4341DE888',
'C0A02878-5F27-4CE2-98DB-CCFB7BB0D754',
'B2C5DE00-584A-4E7A-8D2A-CEACDC2BE316',
'B6385F30-4DA0-11E2-A346-005056110001',
'B6385F30-4DA0-11E2-A346-005056112081',
'B6385F30-4DA0-11E2-A346-005201306251',
'B6385F30-4DA0-11E2-A346-005201306252',
'D31C9295-E25C-4EEE-B84C-050457FFDF48',
'F0357F4A-A6F1-4AD5-9921-0BD1FD3A9C6F',
'C4012345-AAAA-BBBB-CCCC-123456700194',
'C4012345-AAAA-BBBB-CCCC-123456700195',
'C4012345-AAAA-BBBB-CCCC-123456700196',
'C4012345-AAAA-BBBB-CCCC-123456700197',
'C4012345-AAAA-BBBB-CCCC-123456700201',
'C4012345-AAAA-BBBB-CCCC-123456700202',
'C4012345-AAAA-BBBB-CCCC-123456700206',
'C4012345-AAAA-BBBB-CCCC-123456700207',
'C4012345-AAAA-BBBB-CCCC-123456700208',
'C4012345-AAAA-BBBB-CCCC-123456700209',
'C4012345-AAAA-BBBB-CCCC-123456700210',
'C4012345-AAAA-BBBB-CCCC-123456700211',
'C4012345-AAAA-BBBB-CCCC-123456700224',
'C4012345-AAAA-BBBB-CCCC-123456700225',
'C4012345-AAAA-BBBB-CCCC-123456700229',
'83374AEF-A6DD-4E37-8E95-2FDF8A367E0C',
'9A123A6C-5105-48C1-8E74-36F86AB23D67',
'7B02AFCF-5A50-447B-8CB8-4D9061314A08',
'F03546C0-9D7C-46E9-A2CD-6FB16FF7E116',
'DD592AE9-20E6-4E96-853B-88B37A1E3503',
'A660F42B-1892-45E2-8D26-CBF960D1632E',
'1D775F1D-9010-4FB4-8344-E8CF5B31F7B7',
'B6385F30-4DA0-11E2-A346-005056C10116',
'B6385F30-4DA0-11E2-A346-005056C10117',
'B6385F30-4DA0-11E2-A346-005056C10118',
'B6385F30-4DA0-11E2-A346-005056C10119',
'A231ADE2-F544-4C23-B8E0-3DF2B1A8F0C3',
'B6385F30-4DA0-11E2-A346-005056C10120'
)

-- update v3 api to use proxyapi
update resources set proxyapi='/apis' + RelativeUriTemplateFull where api like '/v3/%' and id not in
('B6385F30-4DA0-11E2-A346-005056C10003',
'B6385F30-4DA0-11E2-A346-005056C10004',
'B6385F30-4DA0-11E2-A346-005056C10005',
'B6385F30-4DA0-11E2-A346-005056C10006',
'B6385F30-4DA0-11E2-A346-005056C10032',
'B6385F30-4DA0-11E2-A346-005056C10078',
'B6385F30-4DA0-11E2-A346-005056C10079',
'B6385F30-4DA0-11E2-A346-005056C20007',
'DD592AE9-20E6-4E96-853B-88B37A1E3503',
'9430809D-23E6-47B8-8395-C14B70A2C11E',
'95FAC679-5E60-446A-9B64-CAF49EEA90B1',
'3CEE2C29-4A40-4342-ABE8-CBC4341DE888',
'C0A02878-5F27-4CE2-98DB-CCFB7BB0D754',
'B2C5DE00-584A-4E7A-8D2A-CEACDC2BE316',
'B6385F30-4DA0-11E2-A346-005056110001',
'B6385F30-4DA0-11E2-A346-005056112081',
'B6385F30-4DA0-11E2-A346-005201306251',
'B6385F30-4DA0-11E2-A346-005201306252',
'D31C9295-E25C-4EEE-B84C-050457FFDF48',
'F0357F4A-A6F1-4AD5-9921-0BD1FD3A9C6F',
'C4012345-AAAA-BBBB-CCCC-123456700194',
'C4012345-AAAA-BBBB-CCCC-123456700195',
'C4012345-AAAA-BBBB-CCCC-123456700196',
'C4012345-AAAA-BBBB-CCCC-123456700197',
'C4012345-AAAA-BBBB-CCCC-123456700201',
'C4012345-AAAA-BBBB-CCCC-123456700202',
'C4012345-AAAA-BBBB-CCCC-123456700206',
'C4012345-AAAA-BBBB-CCCC-123456700207',
'C4012345-AAAA-BBBB-CCCC-123456700208',
'C4012345-AAAA-BBBB-CCCC-123456700209',
'C4012345-AAAA-BBBB-CCCC-123456700210',
'C4012345-AAAA-BBBB-CCCC-123456700211',
'C4012345-AAAA-BBBB-CCCC-123456700224',
'C4012345-AAAA-BBBB-CCCC-123456700225',
'C4012345-AAAA-BBBB-CCCC-123456700229',
'83374AEF-A6DD-4E37-8E95-2FDF8A367E0C',
'9A123A6C-5105-48C1-8E74-36F86AB23D67',
'7B02AFCF-5A50-447B-8CB8-4D9061314A08',
'F03546C0-9D7C-46E9-A2CD-6FB16FF7E116',
'DD592AE9-20E6-4E96-853B-88B37A1E3503',
'A660F42B-1892-45E2-8D26-CBF960D1632E',
'1D775F1D-9010-4FB4-8344-E8CF5B31F7B7',
'B6385F30-4DA0-11E2-A346-005056C10116',
'B6385F30-4DA0-11E2-A346-005056C10117',
'B6385F30-4DA0-11E2-A346-005056C10118',
'B6385F30-4DA0-11E2-A346-005056C10119',
'A231ADE2-F544-4C23-B8E0-3DF2B1A8F0C3',
'B6385F30-4DA0-11E2-A346-005056C10120'
)

-- cloud api
update resources set isproxy = 0 where id in(
'C4012345-AAAA-BBBB-CCCC-123456700205',
'C4012345-AAAA-BBBB-CCCC-D23456700234',
'C4012345-AAAA-BBBB-CCCC-D23456700235')

-- set v4 api as proxy api whatever it's cloud api
update resources set proxyapi='/apis' + RelativeUriTemplateFull where id in ('C4012345-AAAA-BBBB-CCCC-123456700198',
'C4012345-AAAA-BBBB-CCCC-123456700199')

update resources set IsProxy =1, ProxyAPI='/apis/v4/search/records/location' where api='/v4/search/records/location' and httpverb='POST'

update resources set relativeUriTemplateFull='/v4/documents/{documentId}/thumbnail?pixelHeight={pixelHeight}&pixelWidth={pixelWidth}' where api ='/v4/documents/{documentId}/thumbnail' and httpverb='GET'

update resources set apiattribute=0 where api ='/v4/transactions/{ids}' and httpverb='GET'
update resources set apiattribute=0 where api ='/v4/settings/fees' and httpverb='GET'


update resources set apiattribute=1 where api ='/v4/payments' and httpverb='GET'
update resources set apiattribute=1 where api ='/v4/payments/{paymentId}/void' and httpverb='PUT'
update resources set apiattribute=1 where api ='/v4/records/{recordId}/payments' and httpverb='GET'
update resources set apiattribute=1 where api ='/v4/records/{recordId}/fees' and httpverb='POST'
update resources set apiattribute=1 where api ='/v4/payments/histories/{id}/fees' and httpverb='GET'
update resources set apiattribute=1 where api ='/v4/records/{recordId}/fees/histories' and httpverb='GET'
update resources set apiattribute=1 where api ='/v4/payments/histories' and httpverb='GET'
update resources set isProxy=0 where api='/apis/v3/caches/remove' and httpverb='PUT'
update resources set apiattribute=1 where api ='/v4/records/{recordId}/payments/histories' and httpverb='GET'

-- /v3/inspectorapp/cleanupcache
UPDATE Resources
SET isproxy = 0
WHERE id = 'D1CC546B-9EA4-41E8-809E-5CB17667938C'
